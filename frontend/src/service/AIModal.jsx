import { GoogleGenerativeAI } from "@google/generative-ai";
  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY; // For Vite
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  
 
 export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Here's a breakdown of the thought process to generate the Las Vegas travel plan:\n\n1.  **Understand the Core Request:** The user wants a 3-day travel plan for a couple visiting Las Vegas on a *cheap budget*. Key requirements include:\n    *   **Destination:** Las Vegas, Nevada.\n    *   **Duration:** 3 Days.\n    *   **Target Audience:** Couple.\n    *   **Budget:** Cheap/Budget-friendly.\n    *   **Output Format:** JSON.\n    *   **Specific Details Needed:**\n        *   **Hotels:** List with Name, Address, Price (approximate/range), Image URL, Geo Coordinates (Lat/Lon), Rating, Description.\n        *   **Itinerary:** Day-by-day plan (Day 1, Day 2, Day 3).\n        *   **Itinerary Details (per place):** Place Name, Details/Description, Image URL, Geo Coordinates (Lat/Lon), Ticket Pricing (approximate/mention if free), Rating, Travel Time (between locations), Best Time to Visit.\n\n2.  **Identify Challenges & Constraints:**\n    *   **\"Cheap Budget\" is Subjective:** What's cheap for one person isn't for another. I need to select hotels and activities generally considered budget-friendly in Vegas, which is notoriously expensive. Off-Strip or older Strip hotels are usually cheaper. Free activities are key.\n    *   **Dynamic Pricing:** Hotel and ticket prices fluctuate *wildly* based on dates, day of the week, events, and how far in advance booked. I cannot provide exact, real-time prices. I need to state this clearly and provide *estimates* or *ranges*.\n    *   **Image URLs:** Finding stable, publicly usable image URLs can be tricky. I'll need to use placeholders or find reliable sources (like Wikimedia Commons or official tourism sites, though even these can change). Generic images might be safer. Using a placeholder like \"image_url_placeholder\" might be necessary if I can't find reliable ones quickly. *Self-correction: Search for representative images on stock photo sites or official tourism sites, but acknowledge they might change.*\n    *   **Geo Coordinates:** Need to look these up accurately for each location using a mapping service (like Google Maps).\n    *   **Travel Time:** This depends heavily on traffic, mode of transport (walking, bus, ride-share), and exact start/end points. I'll provide estimates assuming walking/short rides within concentrated areas (like the Strip).\n    *   **Ratings:** These are subjective and change. I'll use commonly accepted approximate ratings (e.g., from Google Maps or TripAdvisor) but note they are estimates.\n    *   **JSON Structure:** Needs to be valid JSON, well-organized, and follow the requested fields.\n\n3.  **Strategy - Hotels:**\n    *   Focus on off-Strip or older/less glamorous Strip properties known for lower prices.\n    *   Examples: Excalibur, Luxor (South Strip, often cheaper), Flamingo (mid-Strip, older but central), LINQ (central, often competitive), hotels just off-Strip (Ellis Island, Oyo), Downtown hotels (Golden Nugget can sometimes be competitive, others like El Cortez).\n    *   Select 3-4 diverse options.\n    *   Gather details: Name, Address, *Estimated* Price Range (e.g., \"$50-$150+\", clarifying seasonality), find a representative image URL, look up coordinates, find an average rating (e.g., 3.5-4.0), write a brief description highlighting budget aspect or key feature.\n\n4.  **Strategy - Itinerary (Budget Focus):**\n    *   **Mix Free and Low-Cost:** Prioritize free attractions (Bellagio Fountains, Conservatory, Fremont Street Experience, window shopping, people-watching, walking the Strip).\n    *   **Affordable Food:** Suggest food courts, happy hours, buffets (though less common/cheap post-COVID), off-Strip local eateries, packing snacks/drinks. *Self-correction: Explicitly mention food strategy isn't part of the JSON but is crucial for budget.*\n    *   **Minimize Expensive Shows/Clubs:** Suggest maybe *one* cheaper show or focus on free entertainment.\n    *   **Transportation:** Emphasize walking. Suggest the Deuce bus or Monorail for longer distances as cheaper alternatives to taxis/ride-shares for multiple trips.\n    *   **Structure:**\n        *   **Day 1: South/Mid Strip Exploration:** Start with iconic free things. Welcome sign, walk north, Bellagio Fountains/Conservatory, maybe a cheaper hotel pool or happy hour.\n        *   **Day 2: North Strip / Downtown:** Explore the northern end, perhaps a budget-friendly activity like the High Roller (look for deals) or Stratosphere observation deck (check prices). Head to Fremont Street Experience in the evening (free light show, cheaper drinks/food usually).\n        *   **Day 3: Free Choice / Relaxation / Departure Prep:** Include something iconic but maybe optional depending on budget/interest (e.g., Neon Museum - requires tickets but unique, or revisit a favorite spot, pool time, souvenir shopping). Keep it flexible.\n    *   **Details per Place:**\n        *   Name: Clear name.\n        *   Details: Brief description of what it is/why visit.\n        *   Image URL: Find representative image.\n        *   Geo Coordinates: Look up.\n        *   Ticket Pricing: Specify \"Free\" or estimate cost (e.g., \"$20-$35\", mention checking official site).\n        *   Rating: Approximate user rating.\n        *   Travel Time: Estimate time *from the previous location* in the itinerary.\n        *   Best Time to Visit: Usually evening for lights/shows, daytime for walking/pools.\n\n5.  **Data Gathering (Simulated):**\n    *   *Search:* \"cheap hotels Las Vegas Strip\", \"budget hotels downtown Las Vegas\" -> Identify candidates like Excalibur, Luxor, Flamingo, LINQ, OYO, Ellis Island, El Cortez.\n    *   *Search:* For each hotel: \"[Hotel Name] Las Vegas address\", \"[Hotel Name] Las Vegas images\", \"[Hotel Name] Las Vegas coordinates\", \"[Hotel Name] Las Vegas rating\". Note price *ranges* seen on booking sites (understanding they vary).\n    *   *Search:* \"free things to do Las Vegas\", \"cheap activities Las Vegas\". -> List: Bellagio Fountains, Conservatory, Fremont Street Experience, Welcome Sign, walking the Strip, window shopping.\n    *   *Search:* \"affordable attractions Las Vegas\" -> List: High Roller (check deals), Stratosphere Tower, Neon Museum (moderate cost), potentially some cheaper shows/comedy clubs.\n    *   *Search:* For each attraction: \"[Attraction Name] Las Vegas details\", \"[Attraction Name] images\", \"[Attraction Name] coordinates\", \"[Attraction Name] ticket price\", \"[Attraction Name] rating\".\n    *   *Map Tool:* Use Google Maps or similar to estimate walking/transit times between consecutive itinerary points.\n\n6.  **JSON Construction:**\n    *   Create the main JSON object `{}`.\n    *   Add the top-level keys: `\"destination\"`, `\"duration\"`, `\"targetAudience\"`, `\"budget\"`, `\"notes\"`.\n    *   Create the `\"hotelOptions\"` key with an array `[]` as its value.\n    *   Populate the hotel array with objects `{}`, each containing the keys: `\"hotelName\"`, `\"address\"`, `\"priceEstimate\"`, `\"imageUrl\"`, `\"geoCoordinates\"`, `\"rating\"`, `\"description\"`. Fill in the gathered data. Add a disclaimer about price variability.\n    *   Create the `\"itinerary\"` key with an array `[]` as its value.\n    *   Populate the itinerary array with objects `{}`, one for each day (`\"day\": 1`, `\"day\": 2`, `\"day\": 3`).\n    *   Inside each day object, add a `\"dailyPlan\"` key with an array `[]` as its value.\n    *   Populate the `dailyPlan` array with objects `{}`, one for each activity/location.\n    *   Each activity object should contain: `\"placeName\"`, `\"details\"`, `\"imageUrl\"`, `\"geoCoordinates\"`, `\"ticketPricing\"`, `\"rating\"`, `\"travelTimeFromPrevious\"`, `\"bestTimeToVisit\"`. Fill in the gathered data. Ensure `travelTimeFromPrevious` makes sense (e.g., \"N/A\" for the first item of the day).\n\n7.  **Refinement and Review:**\n    *   **Check JSON Validity:** Use a validator if unsure. Ensure quotes, commas, brackets are correct.\n    *   **Budget Alignment:** Does the itinerary *feel* budget-friendly? Are there enough free options? Are suggested paid options relatively cheaper for Vegas? Yes, heavy focus on free sights.\n    *   **Couple Focus:** Is it suitable for a couple? Yes, includes iconic Vegas sights, Fremont experience, options for views/drinks.\n    *   **Flow:** Does the daily itinerary flow geographically? Mostly, grouped by area (South/Mid Strip, North Strip/Downtown).\n    *   **Clarity:** Are descriptions clear? Are disclaimers about pricing and dynamic data present? Added notes section.\n    *   **Completeness:** Are all requested fields included? Yes.\n    *   **Image Placeholders:** Use reasonable image URLs found via search, but accept they might break. *Self-correction: Used specific image URLs found during the (simulated) search. If any break, the user might need to search for replacements.*\n    *   **Geo Coordinates:** Double-check accuracy.\n    *   **Travel Times:** Ensure they are rough estimates and logical (walking vs. bus/ride-share needed).\n\nThis detailed process, including anticipating issues and self-correction, allows for the creation of a comprehensive and helpful JSON response that directly addresses the user's request while managing the inherent uncertainties of dynamic travel information."},
            {text: "```json\n{\n  \"destination\": \"Las Vegas, Nevada\",\n  \"duration\": \"3 Days\",\n  \"targetAudience\": \"Couple\",\n  \"budget\": \"Cheap / Budget-Friendly\",\n  \"notes\": [\n    \"Prices for hotels and attractions fluctuate significantly based on dates (weekends/holidays are much more expensive), events, and how far in advance you book. The prices listed are rough estimates for off-peak periods and should be verified.\",\n    \"This plan focuses on free or low-cost activities. Food costs can vary greatly; utilize food courts, happy hours, off-Strip eateries, or hotel convenience stores for budget savings.\",\n    \"Transportation: Walking is free but distances can be long. Consider the Deuce bus (runs 24/7 along the Strip and to Downtown) or the Monorail for longer hops as a budget alternative to frequent ride-shares/taxis.\",\n    \"Ratings are approximate and based on general user reviews (e.g., Google, TripAdvisor).\",\n    \"Image URLs are examples and may change or become invalid over time.\"\n  ],\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"address\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109, USA\",\n      \"priceEstimate\": \"$40 - $150+ per night (highly variable)\",\n      \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Excalibur_Hotel_Casino_Las_Vegas.jpg/1280px-Excalibur_Hotel_Casino_Las_Vegas.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1020,\n        \"longitude\": -115.1745\n      },\n      \"rating\": \"3.5 - 4.0\",\n      \"description\": \"Iconic castle-themed hotel on the South Strip. Often one of the most affordable major resorts directly on Las Vegas Boulevard. Basic rooms but good location for accessing the South Strip.\"\n    },\n    {\n      \"hotelName\": \"Luxor Hotel & Casino\",\n      \"address\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119, USA\",\n      \"priceEstimate\": \"$45 - $160+ per night (highly variable)\",\n      \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/ae/Luxor_Hotel_and_Casino_at_Night.jpg/1280px-Luxor_Hotel_and_Casino_at_Night.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1006,\n        \"longitude\": -115.1758\n      },\n      \"rating\": \"3.5 - 4.0\",\n      \"description\": \"Pyramid-shaped hotel connected to Excalibur. Offers unique architecture and often competitive pricing. Rooms in the pyramid are older, tower rooms are generally more updated but might cost more.\"\n    },\n    {\n      \"hotelName\": \"Flamingo Las Vegas Hotel & Casino\",\n      \"address\": \"3555 S Las Vegas Blvd, Las Vegas, NV 89109, USA\",\n      \"priceEstimate\": \"$50 - $180+ per night (highly variable)\",\n      \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/9/96/Flamingo_Las_Vegas_Hotel_Casino.jpg/1024px-Flamingo_Las_Vegas_Hotel_Casino.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1162,\n        \"longitude\": -115.1710\n      },\n      \"rating\": \"3.5 - 4.0\",\n      \"description\": \"Classic Vegas hotel with a fantastic center-Strip location. Often has good deals. Features a wildlife habitat with flamingos. Rooms can be dated depending on which tower/renovation level you get.\"\n    },\n    {\n      \"hotelName\": \"The LINQ Hotel + Experience\",\n      \"address\": \"3535 S Las Vegas Blvd, Las Vegas, NV 89109, USA\",\n      \"priceEstimate\": \"$55 - $200+ per night (highly variable)\",\n      \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/07/The_LINQ_Hotel_%26_Casino_building.jpg/1024px-The_LINQ_Hotel_%26_Casino_building.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1178,\n        \"longitude\": -115.1707\n      },\n      \"rating\": \"4.0\",\n      \"description\": \"Modernized hotel in a prime center-Strip location, connected to the LINQ Promenade entertainment district. Rooms are generally smaller but contemporary. Good access to mid-Strip attractions.\"\n    },\n     {\n      \"hotelName\": \"OYO Hotel & Casino Las Vegas\",\n      \"address\": \"115 E Tropicana Ave, Las Vegas, NV 89109, USA\",\n      \"priceEstimate\": \"$35 - $120+ per night (highly variable)\",\n      \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/8/87/Oyo_Hotel_%26_Casino_Las_Vegas_%282019%29.jpg/1280px-Oyo_Hotel_%26_Casino_Las_Vegas_%282019%29.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1019,\n        \"longitude\": -115.1667\n      },\n      \"rating\": \"3.0 - 3.5\",\n      \"description\": \"Located just off the Strip near MGM Grand. Known for very budget-friendly rates. Basic accommodations, but offers casino and dining options. Easy walk to the South Strip.\"\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": 1,\n      \"theme\": \"South & Mid-Strip Icons (Mostly Free)\",\n      \"dailyPlan\": [\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"details\": \"Start with the obligatory photo at the iconic sign. It's located south of Mandalay Bay. There's usually a line, but it moves reasonably fast. Parking is available.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/77/Welcome_to_Fabulous_Las_Vegas_sign.jpg/1280px-Welcome_to_Fabulous_Las_Vegas_sign.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0819,\n            \"longitude\": -115.1728\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.5\",\n          \"travelTimeFromPrevious\": \"N/A (Start of Day)\",\n          \"bestTimeToVisit\": \"Morning (fewer crowds, better light)\"\n        },\n        {\n          \"placeName\": \"Walk the South Strip\",\n          \"details\": \"Walk north from the sign past Mandalay Bay, Luxor, Excalibur, New York-New York, and MGM Grand. Enjoy the unique architecture and street performers.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b0/Las_Vegas_Strip_south_end_casinos.jpg/1280px-Las_Vegas_Strip_south_end_casinos.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1026,\n            \"longitude\": -115.1733\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.6\",\n          \"travelTimeFromPrevious\": \"Approx. 20-30 min walk (from Sign to Luxor/Excalibur area)\",\n          \"bestTimeToVisit\": \"Daytime for walking, Evening for lights\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"details\": \"Inside the Bellagio Hotel, this stunning garden display changes seasonally and is completely free to visit. Elaborate and beautiful.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Bellagio_Conservatory_Spring_2019.jpg/1024px-Bellagio_Conservatory_Spring_2019.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1130,\n            \"longitude\": -115.1746\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.8\",\n          \"travelTimeFromPrevious\": \"Approx. 20-30 min walk (from NYNY/MGM area)\",\n          \"bestTimeToVisit\": \"Anytime during opening hours, less crowded weekday mornings.\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"details\": \"Iconic water show synchronized to music in the lake in front of the Bellagio. Shows run frequently in the afternoons and evenings.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Fountains_of_Bellagio_2.JPG/1280px-Fountains_of_Bellagio_2.JPG\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1125,\n            \"longitude\": -115.1737\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.8\",\n          \"travelTimeFromPrevious\": \"Approx. 2 min walk (from Conservatory)\",\n          \"bestTimeToVisit\": \"Evening (shows are more dramatic with lights, typically every 15-30 mins)\"\n        },\n        {\n          \"placeName\": \"Explore Center Strip & Window Shopping\",\n          \"details\": \"Wander through Aria, The Cosmopolitan, Planet Hollywood, Paris Las Vegas (see the Eiffel Tower replica), and Caesars Palace. Enjoy the atmosphere, maybe find a happy hour deal.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Paris_Las_Vegas_Hotel_Eiffel_Tower.jpg/1024px-Paris_Las_Vegas_Hotel_Eiffel_Tower.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1150,\n            \"longitude\": -115.1720\n          },\n          \"ticketPricing\": \"Free (unless shopping/dining)\",\n          \"rating\": \"4.7\",\n          \"travelTimeFromPrevious\": \"Approx. 5-10 min walk (from Bellagio Fountains)\",\n          \"bestTimeToVisit\": \"Late Afternoon / Evening\"\n        }\n      ]\n    },\n    {\n      \"day\": 2,\n      \"theme\": \"North Strip Views & Downtown Fun\",\n      \"dailyPlan\": [\n        {\n          \"placeName\": \"Flamingo Wildlife Habitat\",\n          \"details\": \"A tranquil oasis at the Flamingo Hotel featuring Chilean flamingos, pelicans, ducks, turtles, and fish. A nice free escape from the casino floor.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Flamingo_Las_Vegas_Wildlife_Habitat.jpg/1024px-Flamingo_Las_Vegas_Wildlife_Habitat.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1169,\n            \"longitude\": -115.1706\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.5\",\n          \"travelTimeFromPrevious\": \"N/A (Assuming start near Flamingo/LINQ or short walk/bus ride)\",\n          \"bestTimeToVisit\": \"Daytime (during opening hours, typically 7 AM - 8 PM)\"\n        },\n        {\n          \"placeName\": \"LINQ Promenade\",\n          \"details\": \"Outdoor pedestrian mall with shops, restaurants, bars, and the High Roller observation wheel. Good for people-watching and finding casual food options.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/High_Roller_observation_wheel_at_The_LINQ_Promenade%2C_Las_Vegas.jpg/1280px-High_Roller_observation_wheel_at_The_LINQ_Promenade%2C_Las_Vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1178,\n            \"longitude\": -115.1696\n          },\n          \"ticketPricing\": \"Free to walk around (High Roller requires ticket ~ $25-40, look for deals)\",\n          \"rating\": \"4.6\",\n          \"travelTimeFromPrevious\": \"Approx. 5 min walk (from Flamingo Habitat)\",\n          \"bestTimeToVisit\": \"Afternoon / Evening\"\n        },\n         {\n          \"placeName\": \"Volcano at The Mirage\",\n          \"details\": \"A free show in front of The Mirage Hotel featuring fireballs, water effects, and a soundtrack. Check schedule as show times vary and can be cancelled due to wind. (Note: Mirage is undergoing transformation, verify Volcano status).\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/Las_Vegas_Mirage_Volcano_Show.jpg/1280px-Las_Vegas_Mirage_Volcano_Show.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1217,\n            \"longitude\": -115.1741\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.5\",\n          \"travelTimeFromPrevious\": \"Approx. 10-15 min walk (from LINQ Promenade)\",\n          \"bestTimeToVisit\": \"Evening (shows typically run on the hour after dark, e.g., 8 PM, 9 PM, 10 PM - VERIFY TIMES)\"\n        },\n        {\n          \"placeName\": \"Travel to Downtown (Fremont Street)\",\n          \"details\": \"Take the Deuce bus (approx. $6 for 2hr pass / $8 for 24hr pass) or a ride-share north to Fremont Street.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bc/Deuce_on_the_Strip_%28Las_Vegas%29.jpg/1024px-Deuce_on_the_Strip_%28Las_Vegas%29.jpg\",\n          \"geoCoordinates\": {\n             \"latitude\": 36.1700,\n             \"longitude\": -115.1460\n          },\n          \"ticketPricing\": \"Approx. $6-$8 (Deuce bus) or variable (ride-share)\",\n          \"rating\": \"N/A\",\n          \"travelTimeFromPrevious\": \"Approx. 20-40 mins (depending on traffic/bus waits)\",\n          \"bestTimeToVisit\": \"Late Afternoon / Early Evening\"\n        },\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"details\": \"Historic downtown Las Vegas under a massive LED canopy. Features free light shows (Viva Vision), live music stages, street performers, zip lines (paid), and older casinos often with cheaper table limits and food/drink specials.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Fremont_Street_Experience%2C_Las_Vegas.jpg/1280px-Fremont_Street_Experience%2C_Las_Vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1700,\n            \"longitude\": -115.1435\n          },\n          \"ticketPricing\": \"Free (Viva Vision show & street atmosphere). Activities like SlotZilla zipline cost extra.\",\n          \"rating\": \"4.6\",\n          \"travelTimeFromPrevious\": \"Approx. 5 min walk (from Downtown bus stop)\",\n          \"bestTimeToVisit\": \"Evening (after 6 PM for full effect, light shows usually hourly)\"\n        }\n      ]\n    },\n    {\n      \"day\": 3,\n      \"theme\": \"Unique Vegas & Relaxation/Departure Prep\",\n      \"dailyPlan\": [\n        {\n          \"placeName\": \"Explore a Unique Hotel Interior (e.g., Venetian/Palazzo)\",\n          \"details\": \"Wander through The Venetian & Palazzo complex. Admire the Grand Canal Shoppes with gondolas (rides are paid), St. Mark's Square replica, and opulent decor. It's like a free trip to Venice.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d5/Grand_Canal_Shoppes_interior.jpg/1024px-Grand_Canal_Shoppes_interior.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1235,\n            \"longitude\": -115.1710\n          },\n          \"ticketPricing\": \"Free to explore (Gondola rides approx $34-$39+ per person)\",\n          \"rating\": \"4.7\",\n          \"travelTimeFromPrevious\": \"N/A (Start day with activity near your hotel or take transport)\",\n          \"bestTimeToVisit\": \"Daytime or Evening\"\n        },\n        {\n          \"placeName\": \"Neon Museum (Optional - Paid)\",\n          \"details\": \"Collection of iconic Las Vegas signs. Offers guided tours through the 'Boneyard'. A unique piece of Vegas history. Booking tickets in advance is highly recommended. Consider a daytime visit for potentially lower cost, though night tours showcase the lit signs (often more expensive).\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0a/Neon_Museum%2C_Las_Vegas.jpg/1024px-Neon_Museum%2C_Las_Vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1803,\n            \"longitude\": -115.1360\n          },\n          \"ticketPricing\": \"Approx. $20-$30+ (check official website for current prices and booking)\",\n          \"rating\": \"4.6\",\n          \"travelTimeFromPrevious\": \"Approx. 15-25 min drive/bus (from Venetian area - located north of Downtown)\",\n          \"bestTimeToVisit\": \"Daytime (cheaper) or Evening (lit signs, book well ahead)\"\n        },\n         {\n          \"placeName\": \"Relax by the Pool / Souvenir Shopping\",\n          \"details\": \"Spend some time relaxing at your hotel pool (most budget hotels still have decent pools). Or, browse the many souvenir shops along the Strip (like Bonanza Gift Shop - 'World's Largest') for mementos. ABC Stores or Walgreens/CVS on Strip are good for cheaper snacks/drinks.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Bonanza_Gifts_%28Las_Vegas%2C_Nevada%29.jpg/1024px-Bonanza_Gifts_%28Las_Vegas%2C_Nevada%29.jpg\",\n          \"geoCoordinates\": {\n             \"latitude\": 36.1317,\n             \"longitude\": -115.1610\n          },\n          \"ticketPricing\": \"Free (unless shopping)\",\n          \"rating\": \"4.0 - 4.5\",\n          \"travelTimeFromPrevious\": \"Variable (depends if coming from Neon Museum or starting near hotel)\",\n          \"bestTimeToVisit\": \"Afternoon\"\n        },\n        {\n          \"placeName\": \"Last Evening Stroll / Revisit Favorite Spot\",\n          \"details\": \"Take a final walk on the Strip, perhaps revisiting the Bellagio Fountains or enjoying the lights. Grab a budget-friendly dinner before heading out.\",\n          \"imageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e1/Las_Vegas_Strip_at_night_2018.jpg/1280px-Las_Vegas_Strip_at_night_2018.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1728\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": \"4.7\",\n          \"travelTimeFromPrevious\": \"Variable\",\n          \"bestTimeToVisit\": \"Evening\"\n        }\n      ]\n    }\n  ]\n}\n```"},
          ],
        },
      ],
    });
  
    const result = await chatSession.sendMessage("Hello");
    const candidates = result.response.candidates;
    
    for (let candidate_index = 0; candidate_index < candidates.length; candidate_index++) {
      const parts = candidates[candidate_index].content.parts;
      
      for (let part_index = 0; part_index < parts.length; part_index++) {
        const part = parts[part_index];
        
        if (part.inlineData) {
          const data = part.inlineData.data; // base64
          const mimeType = part.inlineData.mimeType;
          const extension = mimeType.split("/")[1];
    
          const blob = new Blob([Uint8Array.from(atob(data), c => c.charCodeAt(0))], { type: mimeType });
          const url = URL.createObjectURL(blob);
    
          const a = document.createElement("a");
          a.href = url;
          a.download = `output_${candidate_index}_${part_index}.${extension}`;
          a.click();
    
          URL.revokeObjectURL(url);
        } else if (part.text) {
          console.log("Text response:", part.text);
        }
      }    
    }

